<div class="flex flex-col items-center justify-center">
    <app-navbar></app-navbar>
    <div class="w-screen flex flex-col p-5 gap-5">
        <h2 class="text-center font-bold">Profil utilisateur</h2>
        <form [formGroup]="form" (ngSubmit)="submit()" class="w-full flex flex-col gap-6 items-center">
            <div class="flex flex-col w-64">
              <input matInput formControlName="username" class="custom-form-input">
              <mat-error *ngIf="submitted && form.get('title')?.hasError('required')" class="text-xs mt-1">
                Ce champ est requis.
              </mat-error>
            </div>
            <div class="flex flex-col w-64">
              <input matInput formControlName="email" class="custom-form-input">
              <mat-error *ngIf="submitted && form.get('content')?.hasError('required')" class="text-xs mt-1">
                Ce champ est requis.
              </mat-error>
            </div>
          <mat-error *ngIf="onError">
            {{ errorMessage }}
          </mat-error>
          <button type="submit" [disabled]="loading" class="primary-btn">
            {{ loading ? 'Sauvegarde en cours...' : 'Sauvegarder' }}
          </button>
          <p class="text-red-800 custom-disconnect-text" style="cursor: pointer;" (click)="logout()">Se déconnecter</p>
        </form>

        <hr class="border-black opacity-100 mx-12">

        <h2 class="text-center font-bold">Abonnements</h2>
        <div class="w-full flex flex-wrap justify-between" [ngClass]="{'flex-col': isSmallScreen}">
          <mat-card *ngFor="let theme of themes" [ngStyle]="{'width': isLargeScreen ? 'calc(50% - 24px)' : '100%', 'margin-bottom': '24px'}">
              <h3 class="font-bold">{{ theme.title }}</h3>
              <div class="flex flex-col items-center gap-4">
                  <p class="ellipsis">Description: {{ theme.description }}</p>
                  <button type="button" class="primary-btn" (click)="unsubscribeToTheme(theme.id!)">Se désabonner</button>
              </div>
          </mat-card>
      </div>
    </div>
</div>